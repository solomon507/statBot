{"version":3,"sources":["../src/db.js"],"names":["sql","executeQuery","query","config","user","process","env","USERNAME","password","PASSWORD","server","HOSTNAME","port","PORTNO","database","DATABASE","ConnectionPool","connect","then","console","log","pool","request","rows","result","recordset","close","catch","err"],"mappings":";;;;;;;AAAA;;IAAYA,G;;;;AAEZ;AACO,IAAMC,sCAAe,SAAfA,YAAe,CAASC,KAAT,EAAgB;AAC1C,MAAMC,SAAS;AACbC,UAAMC,QAAQC,GAAR,CAAYC,QADL;AAEbC,cAAUH,QAAQC,GAAR,CAAYG,QAFT;AAGbC,YAAQL,QAAQC,GAAR,CAAYK,QAHP;AAIbC,UAAMP,QAAQC,GAAR,CAAYO,MAJL;AAKbC,cAAUT,QAAQC,GAAR,CAAYS;AALT,GAAf;;AAQA,SAAO,IAAIf,IAAIgB,cAAR,CAAuBb,MAAvB,EACJc,OADI,GAEJC,IAFI,CAEC,gBAAQ;AACZC,YAAQC,GAAR,CAAY,WAAZ;AACA,WAAOC,KAAKC,OAAL,GAAepB,KAAf,CAAqBA,KAArB,CAAP;AACD,GALI,EAMJgB,IANI,CAMC,kBAAU;AACd,QAAMK,OAAOC,OAAOC,SAApB;AACAN,YAAQC,GAAR,CAAYG,IAAZ;AACAvB,QAAI0B,KAAJ;AACA,WAAOH,IAAP;AACD,GAXI,EAYJI,KAZI,CAYE,eAAO;AACZR,YAAQC,GAAR,CAAYQ,GAAZ;AACA5B,QAAI0B,KAAJ;AACA,WAAO,OAAP;AACD,GAhBI,CAAP;AAiBD,CA1BM","file":"db.js","sourcesContent":["import * as sql from 'mssql';\n\n//Function to connect to database and execute query\nexport const executeQuery = function(query) {\n  const config = {\n    user: process.env.USERNAME,\n    password: process.env.PASSWORD,\n    server: process.env.HOSTNAME,\n    port: process.env.PORTNO,\n    database: process.env.DATABASE\n  };\n\n  return new sql.ConnectionPool(config)\n    .connect()\n    .then(pool => {\n      console.log('connected');\n      return pool.request().query(query);\n    })\n    .then(result => {\n      const rows = result.recordset;\n      console.log(rows);\n      sql.close();\n      return rows;\n    })\n    .catch(err => {\n      console.log(err);\n      sql.close();\n      return 'ERROR';\n    });\n};\n"]}